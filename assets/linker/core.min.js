angular.module("minelogApp",["ngRoute","ngAnimate","infinite-scroll"]).config(["$routeProvider",function(a){return a.when("/",{redirectTo:"/dashboard",controller:"dashboardCtrl"}).when("/dashboard",{templateUrl:"dashboard",controller:"dashboardCtrl"}).when("/feedback",{templateUrl:"feedback",controller:"feebackCtrl"}).when("/faq",{templateUrl:"faq",controller:"faqCtrl"}).when("/servers",{templateUrl:"servers",controller:"serversCtrl"}).when("/players",{templateUrl:"players",controller:"playersCtrl"}).when("/profile/:id",{templateUrl:"profile",controller:"profileCtrl"}).when("/server/:id",{templateUrl:"server",controller:"serverCtrl"}).when("/404",{templateUrl:"404",controller:"err404Ctrl"}).when("/500",{templateUrl:"500",controller:"err500Ctrl"}).otherwise({redirectTo:"404"})}]),angular.module("minelogApp").controller("dashboardCtrl",["$scope","socket","logger",function(a,b,c){var d,e;return d=function(){return b.get("/dashboard/GlobalSubscribe",function(b){return a.counters=b}),b.get("/dashboard/TopServersSubscribe",function(b){return a.servers=b.servers}),b.get("/dashboard/TopPlayersSubscribe",function(b){return a.players=b.players})},e=function(){return b.get("/dashboard/GlobalUnsubscribe",function(){}),b.get("/dashboard/TopServersUnsubscribe",function(){}),b.get("/dashboard/TopPlayersUnsubscribe",function(){}),b.removeListener("globalDashboardUpdate"),b.removeListener("topPlayersDashboardUpdate"),b.removeListener("topServersDashboardUpdate")},b.on("globalDashboardUpdate",function(b){return a.counters=b}),b.on("topPlayersDashboardUpdate",function(b){return a.players=b.players}),b.on("topServersDashboardUpdate",function(b){return a.servers=b.servers}),c.logWarning("Minelog is currently in beta. Report bug and help us to make something awesome !"),d(),a.$on("$destroy",function(){return e()})}]),angular.module("minelogApp").controller("err404Ctrl",["$scope",function(){}]),angular.module("minelogApp").controller("err500Ctrl",["$scope",function(){}]),angular.module("minelogApp").controller("faqCtrl",function(){}),angular.module("minelogApp").controller("feebackCtrl",function(){}),angular.module("minelogApp").controller("LangCtrl",["$scope","localize",function(a,b){return b.setLanguage("EN-US"),a.lang="English",a.setLang=function(c){switch(c){case"English":b.setLanguage("EN-US");break;case"Fran√ßais":b.setLanguage("FR-FR")}return a.lang=c}}]),angular.module("minelogApp").controller("minelogCtrl",["$scope","$location",function(a,b){return a.$on("$routeChangeStart",function(){}),a.isSpecificPage=function(){var a;return a=b.path(),_.contains(["/404","/500"],a)},a.main={brand:"MineLog"}}]),angular.module("minelogApp").controller("playersCtrl",["$scope","$http","socket",function(a,b,c){var d,e;return d=function(){return c.get("/playersList/PlayersListSubscribe",function(b){return a.players=b,a.busy=!1})},e=function(){return c.get("/playersList/PlayersListUnsubscribe",function(){}),c.removeListener("playersListUpdate")},b({method:"GET",url:"/playersList/playerNames"}).success(function(b){return a.playerNames=b}),c.on("playersListUpdate",function(b){return a.players=b}),d(),a.busy=!0,a.seeMore=function(){return console.log("seeMore")},a.$on("$destroy",function(){return e()})}]),angular.module("minelogApp").controller("profileCtrl",["$scope","$http",function(a,b){return b({method:"GET",url:"/player/player?id="+$routeParams.id}).success(function(b){return"0"===b&&$location.path("500"),a.player=b,b.online?logger.logSuccess(b.pseudo+" "+localize.getLocalizedString("player-online")):void 0})}]),angular.module("minelogApp").controller("serverCtrl",function(){}),angular.module("minelogApp").controller("serversCtrl",["$scope","$http","socket",function(a,b,c){var d,e;return d=function(){return c.get("/serversList/ServersListSubscribe",function(b){return a.servers=b})},e=function(){return c.get("/serversList/ServersListUnsubscribe",function(){}),c.removeListener("serversListUpdate")},b({method:"GET",url:"/serversList/serverNames"}).success(function(b){return a.serverNames=b}),c.on("serversListUpdate",function(b){return a.servers=b}),d(),a.$on("$destroy",function(){return e()})}]),angular.module("minelogApp").directive("collapseNav",[function(){return{restrict:"A",link:function(a,b){var c,d,e,f,g;return e=b.find("ul").parent("li"),e.append('<i class="fa fa-caret-right icon-has-ul"></i>'),c=e.children("a"),f=b.children("li").not(e),d=f.children("a"),g=$("#app"),c.on("click",function(a){var b,c;return g.hasClass("nav-min")?void 0:(c=$(this),b=c.parent("li"),e.not(b).removeClass("open").find("ul").slideUp(),b.toggleClass("open").find("ul").slideToggle(),a.preventDefault())}),d.on("click",function(){return e.removeClass("open").find("ul").slideUp()}),a.$on("minNav:enabled",function(){return e.removeClass("open").find("ul").slideUp()})}}}]),angular.module("minelogApp").directive("customBackground",function(){return{restrict:"A",controller:["$scope","$element","$location",function(a,b,c){var d,e;return e=function(){return c.path()},d=function(a){switch(b.removeClass("body-home body-special body-tasks body-lock"),a){case"/":return b.addClass("body-home");case"/404":return b.addClass("body-special");case"/500":return b.addClass("body-special")}},d(c.path()),a.$watch(e,function(a,b){return a!==b?d(c.path()):void 0})}]}}),angular.module("minelogApp").directive("goBack",[function(){return{restrict:"A",controller:["$scope","$element","$window",function(a,b,c){return b.on("click",function(){return c.history.back()})}]}}]),angular.module("minelogApp").directive("highlightActive",[function(){return{restrict:"A",controller:["$scope","$element","$attrs","$location",function(a,b,c,d){var e,f,g;return f=b.find("a"),g=function(){return d.path()},e=function(a,b){return b="#"+b,angular.forEach(a,function(a){var c,d,e;return d=angular.element(a),c=d.parent("li"),e=d.attr("href"),c.hasClass("active")&&c.removeClass("active"),0===b.indexOf(e)?c.addClass("active"):void 0})},e(f,d.path()),a.$watch(g,function(a,b){return a!==b?e(f,d.path()):void 0})}]}}]),angular.module("minelogApp").directive("i18n",["localize",function(a){var b;return b={restrict:"EA",updateText:function(b,c,d){var e;return e=0,"i18n-placeholder"===c?(e=a.getLocalizedString(d),b.attr("placeholder",e)):c.length>=1?(e=a.getLocalizedString(c),b.text(e)):void 0},link:function(a,c,d){return a.$on("localizeResourcesUpdated",function(){return b.updateText(c,d.i18n,d.placeholder)}),d.$observe("i18n",function(a){return b.updateText(c,a,d.placeholder)})}}}]),angular.module("minelogApp").directive("slimScroll",[function(){return{restrict:"A",link:function(a,b){return b.slimScroll({height:"100%"})}}}]),angular.module("minelogApp").directive("toggleMinNav",["$rootScope",function(a){return{restrict:"A",link:function(b,c){var d,e,f,g;return f=$("#app"),d=$(window),c.on("click",function(b){return f.hasClass("nav-min")?f.removeClass("nav-min"):(f.addClass("nav-min"),a.$broadcast("minNav:enabled")),b.preventDefault()}),e=0,g=function(){var a;return a=d.width(),768>a?f.removeClass("nav-min"):void 0},d.resize(function(){var a;return clearTimeout(a),a=setTimeout(g,300)})}}}]),angular.module("minelogApp").directive("toggleOffCanvas",[function(){return{restrict:"A",link:function(a,b){return b.on("click",function(){return $("#app").toggleClass("on-canvas")})}}}]),angular.module("minelogApp").factory("localize",["$http","$rootScope","$window",function(a,b,c){var d;return d={language:"",url:void 0,resourceFileLoaded:!1,successCallback:function(a){return d.dictionary=a,d.resourceFileLoaded=!1,b.$broadcast("localizeResourcesUpdated")},setLanguage:function(a){return d.language=a.toLowerCase().split("-")[0],d.initLocalizedResources()},setUrl:function(a){return d.url=a,d.initLocalizedResources()},buildUrl:function(){return d.language||(d.language=(c.navigator.userLanguage||c.navigator.language).toLowerCase(),d.language=d.language.split("-")[0]),"i18n/resources-locale_"+d.language+".js"},initLocalizedResources:function(){var c;return d.url?c=d.url:(c=d.buildUrl(),a.get(c).success(d.successCallback).error(function(){return b.$broadcast("localizeResourcesUpdated")}))},getLocalizedString:function(a){var b,c;return b=void 0,d.dictionary&&a?(c=a.toLowerCase(),b=""===d.dictionary[c]?a:d.dictionary[c]):b=a,b}}}]),angular.module("minelogApp").factory("logger",[function(){var a;return toastr.options={closeButton:void 0,positionClass:"toast-bottom-right",timeOut:"5000"},a=function(a,b){return toastr[b](a)},{log:function(b){return a(b,"info")},logWarning:function(b){return a(b,"warning")},logSuccess:function(b){return a(b,"success")},logError:function(b){return a(b,"error")}}}]),angular.module("minelogApp").factory("socket",function(a){var b;return b=io.socket,{on:function(b,c){return io.socket.on(b,function(){var b;return b=arguments,a.$apply(function(){return c?c.apply(io.socket,b):void 0})})},emit:function(b,c,d){return io.socket.emit(b,c,function(){var b;return b=arguments,a.$apply(function(){return d?d.apply(io.socket,b):void 0})})},get:function(b,c){return io.socket.get(b,function(){var b;return b=arguments,a.$apply(function(){return c?c.apply(io.socket,b):void 0})})},post:function(b,c){return io.socket.post(b,function(){var b;return b=arguments,a.$apply(function(){return c?c.apply(io.socket,b):void 0})})},put:function(b,c){return io.socket.put(b,function(){var b;return b=arguments,a.$apply(function(){return c?c.apply(io.socket,b):void 0})})},"delete":function(b,c){return io.socket["delete"](b,function(){var b;return b=arguments,a.$apply(function(){return c?c.apply(io.socket,b):void 0})})},removeListener:function(b,c){return io.socket.removeListener(b,function(){var b;return b=arguments,a.$apply(function(){return c?c.apply(io.socket,b):void 0})})}}});